---
import styles from './Header.module.css';

const navItems = [
  { href: '/conditions', label: 'Health Topics' },
  { href: '/ingredients', label: 'Ingredient Guide' },
  { href: '/safety-guide', label: 'Safety Tips' },
  { href: '/our-picks', label: 'Our Picks' },
];

const currentPath = Astro.url.pathname;
---

<header class={styles.header}>
  <div class={styles.container}>
    <a href="/" class={styles.logo}>
      <svg class={styles.logoIcon} viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <circle cx="16" cy="16" r="14" stroke="currentColor" stroke-width="2"/>
        <path d="M10 17C10 17 12 20 16 20C20 20 22 17 22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <circle cx="12" cy="13" r="2" fill="currentColor"/>
        <circle cx="20" cy="13" r="2" fill="currentColor"/>
        <path d="M14 8L12 4M18 8L20 4M11 10L7 8M21 10L25 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      <div class={styles.logoText}>
        <span class={styles.logoTitle}>HealthyCatLitter</span>
        <span class={styles.logoTagline}>Cat Litter Information</span>
      </div>
    </a>

    <button class={styles.menuButton} aria-label="Toggle menu" aria-expanded="false" id="menu-toggle">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
        <path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round"/>
      </svg>
    </button>

    <nav class={styles.nav} id="main-nav" aria-label="Main navigation">
      <ul class={styles.navList}>
        {navItems.map(item => (
          <li>
            <a
              href={item.href}
              class:list={[styles.navLink, { [styles.active]: currentPath.startsWith(item.href) }]}
            >
              {item.label}
            </a>
          </li>
        ))}
      </ul>
    </nav>
  </div>
</header>

<script>
  const menuToggle = document.getElementById('menu-toggle');
  const nav = document.getElementById('main-nav');

  menuToggle?.addEventListener('click', () => {
    const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
    menuToggle.setAttribute('aria-expanded', (!isExpanded).toString());
    nav?.classList.toggle('open');
  });
</script>
